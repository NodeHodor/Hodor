{"type":"Program","start":0,"end":1118,"loc":{"start":{"line":1,"column":0},"end":{"line":70,"column":0}},"body":[{"type":"ExpressionStatement","start":83,"end":95,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":12}},"expression":{"type":"Literal","start":83,"end":95,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":12}},"value":"use strict","raw":"'use strict'"},"directive":"use strict"},{"type":"ExpressionStatement","start":136,"end":159,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":23}},"expression":{"type":"AssignmentExpression","start":136,"end":159,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":23}},"operator":"=","left":{"type":"MemberExpression","start":136,"end":150,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":14}},"object":{"type":"Identifier","start":136,"end":142,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":6}},"name":"module"},"property":{"type":"Identifier","start":143,"end":150,"loc":{"start":{"line":14,"column":7},"end":{"line":14,"column":14}},"name":"exports"},"computed":false,"optional":false},"right":{"type":"Identifier","start":153,"end":159,"loc":{"start":{"line":14,"column":17},"end":{"line":14,"column":23}},"name":"unpipe"}}},{"type":"FunctionDeclaration","start":242,"end":460,"loc":{"start":{"line":21,"column":0},"end":{"line":31,"column":1}},"id":{"type":"Identifier","start":251,"end":271,"loc":{"start":{"line":21,"column":9},"end":{"line":21,"column":29}},"name":"hasPipeDataListeners"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":272,"end":278,"loc":{"start":{"line":21,"column":30},"end":{"line":21,"column":36}},"name":"stream"}],"body":{"type":"BlockStatement","start":280,"end":460,"loc":{"start":{"line":21,"column":38},"end":{"line":31,"column":1}},"body":[{"type":"VariableDeclaration","start":284,"end":324,"loc":{"start":{"line":22,"column":2},"end":{"line":22,"column":42}},"declarations":[{"type":"VariableDeclarator","start":288,"end":324,"loc":{"start":{"line":22,"column":6},"end":{"line":22,"column":42}},"id":{"type":"Identifier","start":288,"end":297,"loc":{"start":{"line":22,"column":6},"end":{"line":22,"column":15}},"name":"listeners"},"init":{"type":"CallExpression","start":300,"end":324,"loc":{"start":{"line":22,"column":18},"end":{"line":22,"column":42}},"callee":{"type":"MemberExpression","start":300,"end":316,"loc":{"start":{"line":22,"column":18},"end":{"line":22,"column":34}},"object":{"type":"Identifier","start":300,"end":306,"loc":{"start":{"line":22,"column":18},"end":{"line":22,"column":24}},"name":"stream"},"property":{"type":"Identifier","start":307,"end":316,"loc":{"start":{"line":22,"column":25},"end":{"line":22,"column":34}},"name":"listeners"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":317,"end":323,"loc":{"start":{"line":22,"column":35},"end":{"line":22,"column":41}},"value":"data","raw":"'data'"}],"optional":false}}],"kind":"var"},{"type":"ForStatement","start":328,"end":442,"loc":{"start":{"line":24,"column":2},"end":{"line":28,"column":3}},"init":{"type":"VariableDeclaration","start":333,"end":342,"loc":{"start":{"line":24,"column":7},"end":{"line":24,"column":16}},"declarations":[{"type":"VariableDeclarator","start":337,"end":342,"loc":{"start":{"line":24,"column":11},"end":{"line":24,"column":16}},"id":{"type":"Identifier","start":337,"end":338,"loc":{"start":{"line":24,"column":11},"end":{"line":24,"column":12}},"name":"i"},"init":{"type":"Literal","start":341,"end":342,"loc":{"start":{"line":24,"column":15},"end":{"line":24,"column":16}},"value":0,"raw":"0"}}],"kind":"var"},"test":{"type":"BinaryExpression","start":344,"end":364,"loc":{"start":{"line":24,"column":18},"end":{"line":24,"column":38}},"left":{"type":"Identifier","start":344,"end":345,"loc":{"start":{"line":24,"column":18},"end":{"line":24,"column":19}},"name":"i"},"operator":"<","right":{"type":"MemberExpression","start":348,"end":364,"loc":{"start":{"line":24,"column":22},"end":{"line":24,"column":38}},"object":{"type":"Identifier","start":348,"end":357,"loc":{"start":{"line":24,"column":22},"end":{"line":24,"column":31}},"name":"listeners"},"property":{"type":"Identifier","start":358,"end":364,"loc":{"start":{"line":24,"column":32},"end":{"line":24,"column":38}},"name":"length"},"computed":false,"optional":false}},"update":{"type":"UpdateExpression","start":366,"end":369,"loc":{"start":{"line":24,"column":40},"end":{"line":24,"column":43}},"operator":"++","prefix":false,"argument":{"type":"Identifier","start":366,"end":367,"loc":{"start":{"line":24,"column":40},"end":{"line":24,"column":41}},"name":"i"}},"body":{"type":"BlockStatement","start":371,"end":442,"loc":{"start":{"line":24,"column":45},"end":{"line":28,"column":3}},"body":[{"type":"IfStatement","start":377,"end":438,"loc":{"start":{"line":25,"column":4},"end":{"line":27,"column":5}},"test":{"type":"BinaryExpression","start":381,"end":411,"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":38}},"left":{"type":"MemberExpression","start":381,"end":398,"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":25}},"object":{"type":"MemberExpression","start":381,"end":393,"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":20}},"object":{"type":"Identifier","start":381,"end":390,"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":17}},"name":"listeners"},"property":{"type":"Identifier","start":391,"end":392,"loc":{"start":{"line":25,"column":18},"end":{"line":25,"column":19}},"name":"i"},"computed":true,"optional":false},"property":{"type":"Identifier","start":394,"end":398,"loc":{"start":{"line":25,"column":21},"end":{"line":25,"column":25}},"name":"name"},"computed":false,"optional":false},"operator":"===","right":{"type":"Literal","start":403,"end":411,"loc":{"start":{"line":25,"column":30},"end":{"line":25,"column":38}},"value":"ondata","raw":"'ondata'"}},"consequent":{"type":"BlockStatement","start":413,"end":438,"loc":{"start":{"line":25,"column":40},"end":{"line":27,"column":5}},"body":[{"type":"ReturnStatement","start":421,"end":432,"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":17}},"argument":{"type":"Literal","start":428,"end":432,"loc":{"start":{"line":26,"column":13},"end":{"line":26,"column":17}},"value":true,"raw":"true"}}]},"alternate":null}]}},{"type":"ReturnStatement","start":446,"end":458,"loc":{"start":{"line":30,"column":2},"end":{"line":30,"column":14}},"argument":{"type":"Literal","start":453,"end":458,"loc":{"start":{"line":30,"column":9},"end":{"line":30,"column":14}},"value":false,"raw":"false"}}]}},{"type":"FunctionDeclaration","start":553,"end":1117,"loc":{"start":{"line":40,"column":0},"end":{"line":69,"column":1}},"id":{"type":"Identifier","start":562,"end":568,"loc":{"start":{"line":40,"column":9},"end":{"line":40,"column":15}},"name":"unpipe"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":569,"end":575,"loc":{"start":{"line":40,"column":16},"end":{"line":40,"column":22}},"name":"stream"}],"body":{"type":"BlockStatement","start":577,"end":1117,"loc":{"start":{"line":40,"column":24},"end":{"line":69,"column":1}},"body":[{"type":"IfStatement","start":581,"end":654,"loc":{"start":{"line":41,"column":2},"end":{"line":43,"column":3}},"test":{"type":"UnaryExpression","start":585,"end":592,"loc":{"start":{"line":41,"column":6},"end":{"line":41,"column":13}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":586,"end":592,"loc":{"start":{"line":41,"column":7},"end":{"line":41,"column":13}},"name":"stream"}},"consequent":{"type":"BlockStatement","start":594,"end":654,"loc":{"start":{"line":41,"column":15},"end":{"line":43,"column":3}},"body":[{"type":"ThrowStatement","start":600,"end":650,"loc":{"start":{"line":42,"column":4},"end":{"line":42,"column":54}},"argument":{"type":"NewExpression","start":606,"end":650,"loc":{"start":{"line":42,"column":10},"end":{"line":42,"column":54}},"callee":{"type":"Identifier","start":610,"end":619,"loc":{"start":{"line":42,"column":14},"end":{"line":42,"column":23}},"name":"TypeError"},"arguments":[{"type":"Literal","start":620,"end":649,"loc":{"start":{"line":42,"column":24},"end":{"line":42,"column":53}},"value":"argument stream is required","raw":"'argument stream is required'"}]}}]},"alternate":null},{"type":"IfStatement","start":658,"end":752,"loc":{"start":{"line":45,"column":2},"end":{"line":49,"column":3}},"test":{"type":"BinaryExpression","start":662,"end":697,"loc":{"start":{"line":45,"column":6},"end":{"line":45,"column":41}},"left":{"type":"UnaryExpression","start":662,"end":682,"loc":{"start":{"line":45,"column":6},"end":{"line":45,"column":26}},"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":669,"end":682,"loc":{"start":{"line":45,"column":13},"end":{"line":45,"column":26}},"object":{"type":"Identifier","start":669,"end":675,"loc":{"start":{"line":45,"column":13},"end":{"line":45,"column":19}},"name":"stream"},"property":{"type":"Identifier","start":676,"end":682,"loc":{"start":{"line":45,"column":20},"end":{"line":45,"column":26}},"name":"unpipe"},"computed":false,"optional":false}},"operator":"===","right":{"type":"Literal","start":687,"end":697,"loc":{"start":{"line":45,"column":31},"end":{"line":45,"column":41}},"value":"function","raw":"'function'"}},"consequent":{"type":"BlockStatement","start":699,"end":752,"loc":{"start":{"line":45,"column":43},"end":{"line":49,"column":3}},"body":[{"type":"ExpressionStatement","start":722,"end":737,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":19}},"expression":{"type":"CallExpression","start":722,"end":737,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":19}},"callee":{"type":"MemberExpression","start":722,"end":735,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":17}},"object":{"type":"Identifier","start":722,"end":728,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":10}},"name":"stream"},"property":{"type":"Identifier","start":729,"end":735,"loc":{"start":{"line":47,"column":11},"end":{"line":47,"column":17}},"name":"unpipe"},"computed":false,"optional":false},"arguments":[],"optional":false}},{"type":"ReturnStatement","start":742,"end":748,"loc":{"start":{"line":48,"column":4},"end":{"line":48,"column":10}},"argument":null}]},"alternate":null},{"type":"IfStatement","start":778,"end":829,"loc":{"start":{"line":52,"column":2},"end":{"line":54,"column":3}},"test":{"type":"UnaryExpression","start":782,"end":811,"loc":{"start":{"line":52,"column":6},"end":{"line":52,"column":35}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":783,"end":811,"loc":{"start":{"line":52,"column":7},"end":{"line":52,"column":35}},"callee":{"type":"Identifier","start":783,"end":803,"loc":{"start":{"line":52,"column":7},"end":{"line":52,"column":27}},"name":"hasPipeDataListeners"},"arguments":[{"type":"Identifier","start":804,"end":810,"loc":{"start":{"line":52,"column":28},"end":{"line":52,"column":34}},"name":"stream"}],"optional":false}},"consequent":{"type":"BlockStatement","start":813,"end":829,"loc":{"start":{"line":52,"column":37},"end":{"line":54,"column":3}},"body":[{"type":"ReturnStatement","start":819,"end":825,"loc":{"start":{"line":53,"column":4},"end":{"line":53,"column":10}},"argument":null}]},"alternate":null},{"type":"VariableDeclaration","start":833,"end":845,"loc":{"start":{"line":56,"column":2},"end":{"line":56,"column":14}},"declarations":[{"type":"VariableDeclarator","start":837,"end":845,"loc":{"start":{"line":56,"column":6},"end":{"line":56,"column":14}},"id":{"type":"Identifier","start":837,"end":845,"loc":{"start":{"line":56,"column":6},"end":{"line":56,"column":14}},"name":"listener"},"init":null}],"kind":"var"},{"type":"VariableDeclaration","start":848,"end":889,"loc":{"start":{"line":57,"column":2},"end":{"line":57,"column":43}},"declarations":[{"type":"VariableDeclarator","start":852,"end":889,"loc":{"start":{"line":57,"column":6},"end":{"line":57,"column":43}},"id":{"type":"Identifier","start":852,"end":861,"loc":{"start":{"line":57,"column":6},"end":{"line":57,"column":15}},"name":"listeners"},"init":{"type":"CallExpression","start":864,"end":889,"loc":{"start":{"line":57,"column":18},"end":{"line":57,"column":43}},"callee":{"type":"MemberExpression","start":864,"end":880,"loc":{"start":{"line":57,"column":18},"end":{"line":57,"column":34}},"object":{"type":"Identifier","start":864,"end":870,"loc":{"start":{"line":57,"column":18},"end":{"line":57,"column":24}},"name":"stream"},"property":{"type":"Identifier","start":871,"end":880,"loc":{"start":{"line":57,"column":25},"end":{"line":57,"column":34}},"name":"listeners"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":881,"end":888,"loc":{"start":{"line":57,"column":35},"end":{"line":57,"column":42}},"value":"close","raw":"'close'"}],"optional":false}}],"kind":"var"},{"type":"ForStatement","start":893,"end":1115,"loc":{"start":{"line":59,"column":2},"end":{"line":68,"column":3}},"init":{"type":"VariableDeclaration","start":898,"end":907,"loc":{"start":{"line":59,"column":7},"end":{"line":59,"column":16}},"declarations":[{"type":"VariableDeclarator","start":902,"end":907,"loc":{"start":{"line":59,"column":11},"end":{"line":59,"column":16}},"id":{"type":"Identifier","start":902,"end":903,"loc":{"start":{"line":59,"column":11},"end":{"line":59,"column":12}},"name":"i"},"init":{"type":"Literal","start":906,"end":907,"loc":{"start":{"line":59,"column":15},"end":{"line":59,"column":16}},"value":0,"raw":"0"}}],"kind":"var"},"test":{"type":"BinaryExpression","start":909,"end":929,"loc":{"start":{"line":59,"column":18},"end":{"line":59,"column":38}},"left":{"type":"Identifier","start":909,"end":910,"loc":{"start":{"line":59,"column":18},"end":{"line":59,"column":19}},"name":"i"},"operator":"<","right":{"type":"MemberExpression","start":913,"end":929,"loc":{"start":{"line":59,"column":22},"end":{"line":59,"column":38}},"object":{"type":"Identifier","start":913,"end":922,"loc":{"start":{"line":59,"column":22},"end":{"line":59,"column":31}},"name":"listeners"},"property":{"type":"Identifier","start":923,"end":929,"loc":{"start":{"line":59,"column":32},"end":{"line":59,"column":38}},"name":"length"},"computed":false,"optional":false}},"update":{"type":"UpdateExpression","start":931,"end":934,"loc":{"start":{"line":59,"column":40},"end":{"line":59,"column":43}},"operator":"++","prefix":false,"argument":{"type":"Identifier","start":931,"end":932,"loc":{"start":{"line":59,"column":40},"end":{"line":59,"column":41}},"name":"i"}},"body":{"type":"BlockStatement","start":936,"end":1115,"loc":{"start":{"line":59,"column":45},"end":{"line":68,"column":3}},"body":[{"type":"ExpressionStatement","start":942,"end":965,"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":27}},"expression":{"type":"AssignmentExpression","start":942,"end":965,"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":27}},"operator":"=","left":{"type":"Identifier","start":942,"end":950,"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":12}},"name":"listener"},"right":{"type":"MemberExpression","start":953,"end":965,"loc":{"start":{"line":60,"column":15},"end":{"line":60,"column":27}},"object":{"type":"Identifier","start":953,"end":962,"loc":{"start":{"line":60,"column":15},"end":{"line":60,"column":24}},"name":"listeners"},"property":{"type":"Identifier","start":963,"end":964,"loc":{"start":{"line":60,"column":25},"end":{"line":60,"column":26}},"name":"i"},"computed":true,"optional":false}}},{"type":"IfStatement","start":971,"end":1057,"loc":{"start":{"line":62,"column":4},"end":{"line":64,"column":5}},"test":{"type":"LogicalExpression","start":975,"end":1033,"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":66}},"left":{"type":"BinaryExpression","start":975,"end":1002,"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":35}},"left":{"type":"MemberExpression","start":975,"end":988,"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":21}},"object":{"type":"Identifier","start":975,"end":983,"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":16}},"name":"listener"},"property":{"type":"Identifier","start":984,"end":988,"loc":{"start":{"line":62,"column":17},"end":{"line":62,"column":21}},"name":"name"},"computed":false,"optional":false},"operator":"!==","right":{"type":"Literal","start":993,"end":1002,"loc":{"start":{"line":62,"column":26},"end":{"line":62,"column":35}},"value":"cleanup","raw":"'cleanup'"}},"operator":"&&","right":{"type":"BinaryExpression","start":1006,"end":1033,"loc":{"start":{"line":62,"column":39},"end":{"line":62,"column":66}},"left":{"type":"MemberExpression","start":1006,"end":1019,"loc":{"start":{"line":62,"column":39},"end":{"line":62,"column":52}},"object":{"type":"Identifier","start":1006,"end":1014,"loc":{"start":{"line":62,"column":39},"end":{"line":62,"column":47}},"name":"listener"},"property":{"type":"Identifier","start":1015,"end":1019,"loc":{"start":{"line":62,"column":48},"end":{"line":62,"column":52}},"name":"name"},"computed":false,"optional":false},"operator":"!==","right":{"type":"Literal","start":1024,"end":1033,"loc":{"start":{"line":62,"column":57},"end":{"line":62,"column":66}},"value":"onclose","raw":"'onclose'"}}},"consequent":{"type":"BlockStatement","start":1035,"end":1057,"loc":{"start":{"line":62,"column":68},"end":{"line":64,"column":5}},"body":[{"type":"ContinueStatement","start":1043,"end":1051,"loc":{"start":{"line":63,"column":6},"end":{"line":63,"column":14}},"label":null}]},"alternate":null},{"type":"ExpressionStatement","start":1090,"end":1111,"loc":{"start":{"line":67,"column":4},"end":{"line":67,"column":25}},"expression":{"type":"CallExpression","start":1090,"end":1111,"loc":{"start":{"line":67,"column":4},"end":{"line":67,"column":25}},"callee":{"type":"MemberExpression","start":1090,"end":1103,"loc":{"start":{"line":67,"column":4},"end":{"line":67,"column":17}},"object":{"type":"Identifier","start":1090,"end":1098,"loc":{"start":{"line":67,"column":4},"end":{"line":67,"column":12}},"name":"listener"},"property":{"type":"Identifier","start":1099,"end":1103,"loc":{"start":{"line":67,"column":13},"end":{"line":67,"column":17}},"name":"call"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":1104,"end":1110,"loc":{"start":{"line":67,"column":18},"end":{"line":67,"column":24}},"name":"stream"}],"optional":false}}]}}]}}],"sourceType":"module"}